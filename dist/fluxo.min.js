/*! fluxo-js v0.0.17 | (c) 2014, 2015 Samuel Sim√µes | https://github.com/fluxo-js/fluxo */
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.Fluxo=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("./fluxo.object_store.js"),f=d(e);c["default"]=f["default"].create({setup:function(){var a=this.stores||[];this.stores=[],this.setStores(a),this.createDelegateMethods(),f["default"].setup.apply(this)},store:{},storesOnChangeCancelers:{},childrenDelegate:[],createDelegateMethods:function(){for(var a=0,b=this.childrenDelegate.length;b>a;a++){var c=this.childrenDelegate[a];this.createDelegateMethod(c)}},createDelegateMethod:function(a){this[a]=function(a,b){for(var c=this.find(b),d=arguments.length,e=Array(d>2?d-2:0),f=2;d>f;f++)e[f-2]=arguments[f];c[a].apply(c,e)}.bind(this,a)},addStores:function(a){for(var b=0,c=a.length;c>b;b++){var d=a[b];this.addStore(d)}},resetStores:function(a){this.removeAll(),this.addStores(a)},removeAll:function(){for(var a=this.stores.length-1,b=0;a>=b;a--){var c=this.stores[a];this.removeListenersOn(c)}this.stores=[],this.triggerEvents(["remove","change"])},setStores:function(a){for(var b=0,c=a.length;c>b;b++){var d=a[b],e=this.find(d.id||d.cid);e?e.set(d):this.addStore(d)}},addStore:function(a){a._fluxo!==!0&&(a=f["default"].create(this.store,{data:a}));var b=this.find(a.data.id);if(b)return b;this.stores.push(a);var c=function(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;b>d;d++)c[d-1]=arguments[d];c.unshift("stores:"+a),this.triggerEvent.apply(this,c)};return this.storesOnChangeCancelers[a.cid]=a.on(["*"],c.bind(this)),this.sort&&this.stores.sort(this.sort),this.triggerEvents(["add","change"]),a},find:function(a){var b;return a&&(b=this.findWhere({id:a}),b||this.stores.some(function(c){return c.cid===a?(b=c,!0):void 0})),b},findWhere:function(a){return this.where(a,!0)[0]},where:function(a,b){var c=[];if(!a)return[];for(var d=0,e=this.stores.length;e>d;d++){var f=this.stores[d],g=!0;for(var h in a)if(f.data[h]!==a[h]){g=!1;break}if(g&&(c.push(f),b))break}return c},removeListenersOn:function(a){this.storesOnChangeCancelers[a.cid].call(),delete this.storesOnChangeCancelers[a.cid]},remove:function(a){this.removeListenersOn(a),this.stores.splice(this.stores.indexOf(a),1),this.triggerEvents(["remove","change"])},storesToJSON:function(){for(var a=[],b=0,c=this.stores.length;c>b;b++){var d=this.stores[b];a.push(d.toJSON())}return a},toJSON:function(){var a=JSON.parse(JSON.stringify(this.data));return a.cid=this.cid,{data:a,stores:this.storesToJSON()}}}),b.exports=c["default"]},{"./fluxo.object_store.js":4}],2:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(){for(var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],b=arguments.length,c=Array(b>1?b-1:0),d=1;b>d;d++)c[d-1]=arguments[d];for(var e=0,f=c.length;f>e;e++){var g=c[e];for(var h in g)a[h]=g[h]}return a},b.exports=c["default"]},{}],3:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("./fluxo.object_store.js"),f=d(e),g=a("./fluxo.collection_store.js"),h=d(g),i=a("./fluxo.extend.js"),j=d(i),k=a("./fluxo.radio.js"),l=d(k);c["default"]={ObjectStore:f["default"],CollectionStore:h["default"],Extend:j["default"],Radio:l["default"]},b.exports=c["default"]},{"./fluxo.collection_store.js":1,"./fluxo.extend.js":2,"./fluxo.object_store.js":4,"./fluxo.radio.js":5}],4:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("./fluxo.radio.js"),f=d(e),g=a("./fluxo.extend.js"),h=d(g),i=1;c["default"]={setup:function(){this.cid="FS:"+i++,this._fluxo=!0;var a=this.data;this.data={},this.set(a||{}),this.registerComputed(),this.initialize()},initialize:function(){},create:function(){for(var a=arguments.length,b=Array(a),c=0;a>c;c++)b[c]=arguments[c];var d=h["default"].apply(void 0,[{},this].concat(b));return d.setup.call(d),d},on:function(a,b){for(var c=[],d=0,e=a.length;e>d;d++){var g=a[d],h=this.cid+":"+g,i=f["default"].subscribe(h,b.bind(this));c.push(i)}var j=function(){for(var a=0,b=c.length;b>a;a++){var d=c[a];d.call()}};return j},triggerEvents:function(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;b>d;d++)c[d-1]=arguments[d];for(var e=0,f=a.length;f>e;e++){var g=a[e];this.triggerEvent.apply(this,[g].concat(c))}},triggerEvent:function(a){for(var b=this.cid+":"+a,c=arguments.length,d=Array(c>1?c-1:0),e=1;c>e;e++)d[e-1]=arguments[e];f["default"].publish.apply(f["default"],[b,this].concat(d)),f["default"].publish.apply(f["default"],[this.cid+":*",a,this].concat(d))},computed:{},attributeParsers:{},registerComputed:function(){var a=function(a){var b=this[a].call(this);this.setAttribute(a,b)};for(var b in this.computed){var c=this.computed[b];this.on(c,a.bind(this,b)),this.setAttribute(b,this[b].call(this))}},setAttribute:function(a,b,c){c=c||{},this.data[a]!==b&&(this.attributeParsers[a]&&(b=this.attributeParsers[a](b)),this.data[a]=b,this.triggerEvent("change:"+a),c.silentGlobalChange||this.triggerEvent("change"))},unsetAttribute:function(a,b){b=b||{},delete this.data[a],this.triggerEvent("change:"+a),b.silentGlobalChange||this.triggerEvent("change")},set:function(a){for(var b in a)this.setAttribute(b,a[b],{silentGlobalChange:!0});this.triggerEvent("change")},reset:function(a){a=a||{};for(var b in this.data)void 0===a[b]&&this.unsetAttribute(b,{silentGlobalChange:!0});for(var b in a)this.setAttribute(b,a[b],{silentGlobalChange:!0});this.triggerEvent("change")},toJSON:function(){var a=JSON.parse(JSON.stringify(this.data));return a.cid=this.cid,a}},b.exports=c["default"]},{"./fluxo.extend.js":2,"./fluxo.radio.js":5}],5:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]={callbackIds:1,events:{},subscribe:function(a,b){var c=this.callbackIds++;return this.events[a]=this.events[a]||{},this.events[a][c]=b,this.removeSubscription.bind(this,a,c)},removeSubscription:function(a,b){this.events[a]=this.events[a]||{},delete this.events[a][b]},publish:function(a){for(var b=this.events[a]||{},c=arguments.length,d=Array(c>1?c-1:0),e=1;c>e;e++)d[e-1]=arguments[e];for(var f in b)b[f].apply(null,d)}},b.exports=c["default"]},{}]},{},[3])(3)});
//# sourceMappingURL=fluxo.map